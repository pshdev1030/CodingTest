<html>
    <head>
        <meta charset="UTF-8">
        <title>출력결과</title>
    </head>
    <body>
        <script>
            function compareMaps(map1, map2){
                if(map1.size!==map2.size) return false;
                // size가 다를경우 false리턴
                for([key,value] of map2){
                    if(!map1.has(key)||map1.get(key)!==value) return false;
                }
                return true;
            }
            function solution(a,b){
                let sha=new Map();
                let shb=new Map();
                let i=answer=0;
                if(a.length<b.length) return 0;
                else{
                    for(i=0;i<b.length;i++){
                        if(sha.has(a[i])) sha.set(a[i],sha.get(a[i])+1);
                        else sha.set(a[i],1);

                        if(shb.has(b[i])) shb.set(b[i],shb.get(b[i])+1);
                        else shb.set(b[i],1);
                    }

                    if(compareMaps(sha,shb)) answer++;
                    for(let k=i;k<a.length;k++){
                        sha.set(a[k-i],sha.get(a[k-1])-1);
                        if(sha.get(a[k-i])===0) sha.delete(a[k-i]);
                        
                        if(sha.has(a[k])) sha.set(a[k],sha.get(a[k])+1);
                        else sha.set(a[k],1);

                        if(compareMaps(sha,shb)) answer++;
                    }
                }
                return answer;
            }
            
            let a="bacaAacba";
            let b="abc";
            console.log(solution(a, b));
        </script>
    </body>
</html>
<!-- 부분문자열 부분합= 투포인터 
map에서 키를 꼭 제거해주기,,,
키를 제거 안해주고 함수에서 map.has로 비교하니까 허술했다. -->